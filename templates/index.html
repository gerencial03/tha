{% extends "base.html" %}

{% block content %}

<!-- Launch Banner -->
<div class="launch-banner">
    <div class="container-fluid px-3 text-center">
        <h3>Lançamento esfoliantes Toque Essencial!</h3>
    </div>
</div>

<!-- Hero Banner (Mobile First) -->
<section class="hero-banner">
    <div class="container-fluid px-0">
        <div class="hero-content">
            <div class="hero-image-container">
                <img src="https://images.unsplash.com/photo-1596462502278-27bfdc403348?w=800&h=600&fit=crop&crop=center" alt="Tha Beauty" class="hero-main-image img-fluid">
                
                <!-- Text Overlay -->
                <div class="hero-text-overlay">
                    <h2 class="hero-title">
                        <span class="highlight">Tha Beauty</span>: beleza<br>
                        que inspira.<br>
                        Fragrâncias que<br>
                        contam histórias.
                    </h2>
                    <div class="hero-website-button">
                        <i class="fas fa-globe me-2"></i>
                        usethabeauty.com.br
                    </div>
                </div>
                
                <!-- Products Showcase at Bottom -->
                <div class="hero-products-showcase">
                    <img src="https://cdn.pixabay.com/photo/2020/05/18/16/17/cosmetics-5187421_1280.jpg" alt="Produtos Tha Beauty" class="products-lineup">
                </div>
            </div>
        </div>
    </div>
</section>

{% if search_results is defined %}
<!-- Search Results -->
<section class="search-results">
    <div class="container">
        <h2 class="section-title">Resultados da busca por "{{ search_query }}"</h2>
        {% if search_results %}
            <div class="row">
                {% for product in search_results %}
                    <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                        {% include 'product_card.html' %}
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="text-center py-5">
                <i class="fas fa-search fa-3x text-muted mb-3"></i>
                <h4>Nenhum produto encontrado</h4>
                <p class="text-muted">Tente buscar por outros termos</p>
            </div>
        {% endif %}
    </div>
</section>
{% else %}

<!-- Linha Toque Essencial -->
<section class="product-section">
    <div class="container-fluid px-3">
        <h2 class="section-title">Linha Toque Essencial</h2>
        <div class="row g-3">
            {% for product in linha_toque_essencial %}
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="product-card">
                        <!-- Product Status Badges -->
                        <div class="product-badges">
                            {% if product.free_shipping %}
                                <span class="badge-frete">Frete grátis a partir de R$ 100</span>
                            {% endif %}
                            {% if product.get('limited_stock') %}
                                <span class="badge-limited">ESTOQUE LIMITADO</span>
                            {% endif %}
                        </div>

                        <!-- Product Image -->
                        <div class="product-image">
                            <img src="{{ product.image_url }}" alt="{{ product.name }}" loading="lazy">
                        </div>

                        <!-- Product Info -->
                        <div class="product-info">
                            <h3 class="product-name">{{ product.name }}</h3>
                            
                            <!-- Rating -->
                            <div class="product-rating">
                                {% for i in range(5) %}
                                    <i class="fas fa-star {{ 'active' if i < product.rating else '' }}"></i>
                                {% endfor %}
                                <span class="review-count">({{ product.review_count }})</span>
                            </div>

                            <!-- Price -->
                            <div class="product-price">
                                <span class="current-price">R${{ "%.2f"|format(product.price) }}</span>
                                {% if product.original_price %}
                                    <div class="price-discount">
                                        <span class="discount-badge">-{{ product.discount }}% OFF</span>
                                        <span class="original-price">R${{ "%.2f"|format(product.original_price) }}</span>
                                    </div>
                                {% endif %}
                            </div>

                            <!-- Action Button -->
                            <div class="product-action">
                                <a href="{{ url_for('add_to_cart', product_id=product.id) }}" class="btn-comprar" style="background-color: #e67e22 !important; color: white !important; border: 1px solid #e67e22 !important; padding: 8px 16px !important; border-radius: 8px !important; text-decoration: none !important; display: flex !important; align-items: center !important; justify-content: center !important; font-size: 13px !important; font-weight: 400 !important; min-height: 36px !important; width: 100% !important;">
                                    Comprar
                                </a>
                                <div class="installment-info">
                                    <small>Pronto!</small>
                                    <small>Incluindo...</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Queridinhos da marca -->
<section class="product-section">
    <div class="container-fluid px-3">
        <h2 class="section-title">Queridinhos da marca!</h2>
        <div class="row g-3">
            {% for product in queridinhos %}
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="product-card">
                        <!-- Product Status Badges -->
                        <div class="product-badges">
                            {% if product.free_shipping %}
                                <span class="badge-frete">Frete grátis a partir de R$ 100</span>
                            {% endif %}
                        </div>

                        <!-- Product Image -->
                        <div class="product-image">
                            <img src="{{ product.image_url }}" alt="{{ product.name }}" loading="lazy">
                        </div>

                        <!-- Product Info -->
                        <div class="product-info">
                            <h3 class="product-name">{{ product.name }}</h3>
                            
                            <!-- Rating -->
                            <div class="product-rating">
                                {% for i in range(5) %}
                                    <i class="fas fa-star {{ 'active' if i < product.rating else '' }}"></i>
                                {% endfor %}
                                <span class="review-count">({{ product.review_count }})</span>
                            </div>

                            <!-- Price -->
                            <div class="product-price">
                                <span class="current-price">R${{ "%.2f"|format(product.price) }}</span>
                                {% if product.original_price %}
                                    <div class="price-discount">
                                        <span class="discount-badge">-{{ product.discount }}% OFF</span>
                                        <span class="original-price">R${{ "%.2f"|format(product.original_price) }}</span>
                                    </div>
                                {% endif %}
                            </div>

                            <!-- Action Button -->
                            <div class="product-action">
                                <a href="{{ url_for('add_to_cart', product_id=product.id) }}" class="btn-comprar" style="background-color: #e67e22 !important; color: white !important; border: 1px solid #e67e22 !important; padding: 8px 16px !important; border-radius: 8px !important; text-decoration: none !important; display: flex !important; align-items: center !important; justify-content: center !important; font-size: 13px !important; font-weight: 400 !important; min-height: 36px !important; width: 100% !important;">
                                    Comprar
                                </a>
                                <div class="installment-info">
                                    <small>Pronto!</small>
                                    <small>Incluindo...</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

{% endif %}
{% endblock %}
