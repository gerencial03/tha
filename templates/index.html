{% extends "base.html" %}

{% block content %}
<div class="container">
    <!-- Sort Options -->
    <div class="sort-options">
        <span class="sort-label">Ordenar por</span>
        <select class="sort-select">
            <option>Mais relevantes</option>
            <option>Menor preço</option>
            <option>Maior preço</option>
            <option>Mais vendidos</option>
        </select>
    </div>

    <!-- Products Grid - Real MercadoLivre Style -->
    <div class="products-grid">
        {% for product in labubu_collection %}
            <div class="product-card">
                <a href="{{ url_for('product_detail', product_id=product.id) }}" class="product-link">
                    <!-- Product Image -->
                    <div class="product-image">
                        <img src="{{ product.image_url }}" alt="{{ product.name }}" loading="lazy">
                    </div>

                    <!-- Product Info -->
                    <div class="product-info">
                        <h3 class="product-title">{{ product.name }}</h3>
                        
                        <!-- Rating -->
                        <div class="product-rating">
                            {% for i in range(5) %}
                                <i class="fas fa-star {% if i < product.rating %}filled{% endif %}"></i>
                            {% endfor %}
                            <span class="rating-count">{{ product.rating }}({{ product.review_count }})</span>
                        </div>
                        
                        <!-- Price -->
                        {% if product.price > (product.price * 0.60) %}
                            <div class="old-price">R$ {{ "%.0f"|format(product.price) }}</div>
                        {% endif %}
                        <div class="current-price">R$ {{ "%.2f"|format(product.price * 0.60) }}</div>
                        {% if product.price > (product.price * 0.60) %}
                            <div class="discount">{{ ((product.price - (product.price * 0.60)) / product.price * 100)|round|int }}% OFF</div>
                        {% endif %}
                        
                        <!-- Shipping -->
                        <div class="shipping">Frete grátis</div>
                        <div class="shipping-brand">Enviado pelo <i class="fas fa-shield-alt"></i></div>
                    </div>
                </a>
            </div>
        {% endfor %}
        
        {% for product in acessorios_labubu %}
            <div class="product-card">
                <a href="{{ url_for('product_detail', product_id=product.id) }}" class="product-link">
                    <!-- Product Image -->
                    <div class="product-image">
                        <img src="{{ product.image_url }}" alt="{{ product.name }}" loading="lazy">
                    </div>

                    <!-- Product Info -->
                    <div class="product-info">
                        <h3 class="product-title">{{ product.name }}</h3>
                        
                        <!-- Rating -->
                        <div class="product-rating">
                            {% for i in range(5) %}
                                <i class="fas fa-star {% if i < product.rating %}filled{% endif %}"></i>
                            {% endfor %}
                            <span class="rating-count">{{ product.rating }}({{ product.review_count }})</span>
                        </div>
                        
                        <!-- Price -->
                        {% if product.price > (product.price * 0.60) %}
                            <div class="old-price">R$ {{ "%.0f"|format(product.price) }}</div>
                        {% endif %}
                        <div class="current-price">R$ {{ "%.2f"|format(product.price * 0.60) }}</div>
                        {% if product.price > (product.price * 0.60) %}
                            <div class="discount">{{ ((product.price - (product.price * 0.60)) / product.price * 100)|round|int }}% OFF</div>
                        {% endif %}
                        
                        <!-- Shipping -->
                        <div class="shipping">Frete grátis</div>
                        <div class="shipping-brand">Enviado pelo <i class="fas fa-shield-alt"></i></div>
                    </div>
                </a>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}